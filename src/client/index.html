<!DOCTYPE>
<html>
<head>
</head>
<body>
  <p>
    <input class="room" name="room" value="test" />
    <button class="join">Join</button>
  </p>
  <p>
    <input class="vote" name="vote" />
    <button class="send">Send</button>
    <div class="console"></div>
  </p>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.1/jquery.min.js"></script>
  <script src="/socket.io/socket.io.js"></script>
  <script>
  function update(value) {
    $('.console').text(value);
  }

  $('.join').on('click', function() {
    var socket = io.connect('http://localhost:3333');

    socket.on('connect', function() {
        socket.emit('join', $('.room').val());
        update('Connected to ' + $('.room').val());
    });

    socket.on('disconnect', function() {
        update('Disconnected');
    });

    socket.on('error', function (data) {
      update(JSON.stringify(data));
    });
    socket.on('votingChanged', function (data) {
      update(JSON.stringify(data));
    });

    $('.send').on('click', function() {
      socket.emit('vote', {vote: $('.vote').val(), user: 'test'}, $('.room').val());
    });
  });
  </script>
</body>
</html>
