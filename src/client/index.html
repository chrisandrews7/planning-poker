<!DOCTYPE>
<html>
<head>
</head>
<body>
  <p>
    <input class="room" name="room" value="t4d2a" placeholder="Room" />
    <button class="join">Join</button>
  </p>
  <p>
    <span>Vote</span>
    <input class="vote" name="vote" placeholder="Vote Value" />
  </p>
  <p>
    <span>User</span>
    <input class="user" name="user" placeholder="User Name" />
  </p>
    <button class="send">Send</button>
    <div class="console"></div>
  </p>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.1/jquery.min.js"></script>
  <script src="/socket.io/socket.io.js"></script>
  <script>
  function update(value) {
    $('.console').text(value);
  }

  $('.join').on('click', function() {
    var socket = io.connect('http://localhost:3333');

    socket.on('connect', function() {
        socket.emit('join', $('.room').val(), $('.user').val());
    });

    socket.on('disconnect', function() {
      io.to($('.room').val()).emit('leave', $('.room').val(), $('.user').val());
    });

    socket.on('error', function (data) {
      update(JSON.stringify(data));
    });
    socket.on('votesUpdated', function (data) {
      update(JSON.stringify(data));
    });
    socket.on('playersUpdated', function (data) {
      update(JSON.stringify(data));
    });

    $('.send').on('click', function() {
      socket.emit('vote', {vote: $('.vote').val(), user: $('.user').val()}, $('.room').val());
    });
  });
  </script>
</body>
</html>
